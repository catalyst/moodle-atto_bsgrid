YUI.add("moodle-atto_bsgrid-button",function(e,t){var o,a="atto_bsgrid",s={INPUTSUBMIT:"atto_bsgrid_selectcolumns"},i='<div class="atto_bsgrid container-fluid"><div class="row-fluid"><div class="col-md-6 span6"><p>'+M.util.get_string("column1","atto_bsgrid")+'</p></div><div class="col-md-6 span6"><p>'+M.util.get_string("column2","atto_bsgrid")+"</p></div></div></div>",l='<div class="atto_bsgrid container-fluid"><div class="row-fluid"><div class="col-md-4 span4"><p>'+M.util.get_string("column1","atto_bsgrid")+'</p></div><div class="col-md-4 span4"><p>'+M.util.get_string("column2","atto_bsgrid")+'</p></div><div class="col-md-4 span4"><p>'+M.util.get_string("column3","atto_bsgrid")+"</p></div></div></div>",d='<div class="atto_bsgrid container-fluid"><div class="row-fluid"><div class="col-md-4 span4"><p>'+M.util.get_string("column1","atto_bsgrid")+'</p></div><div class="col-md-8 span8"><p>'+M.util.get_string("column2","atto_bsgrid")+"</p></div></div></div>",n='<div class="atto_bsgrid container-fluid"><div class="row-fluid"><div class="col-md-8 span8"><p>'+M.util.get_string("column1","atto_bsgrid")+'</p></div><div class="col-md-4 span4"><p>'+M.util.get_string("column1","atto_bsgrid")+"</p></div></div></div>",c='<div class="atto_bsgrid container-fluid"><div class="row-fluid"><div class="col-md-3 span3"><p>'+M.util.get_string("column1","atto_bsgrid")+'</p></div><div class="col-md-3 span3"><p>'+M.util.get_string("column2","atto_bsgrid")+'</p></div><div class="col-md-3 span3"><p>'+M.util.get_string("column3","atto_bsgrid")+'</p></div><div class="col-md-3 span3"><p>'+M.util.get_string("column4","atto_bsgrid")+"</p></div></div></div>",r='<div class="atto_bsgrid container-fluid"><div class="row-fluid"><div class="col-md-2 span2"><p>'+M.util.get_string("column1","atto_bsgrid")+'</p></div><div class="col-md-2 span2"><p>'+M.util.get_string("column2","atto_bsgrid")+'</p></div><div class="col-md-2 span2"><p>'+M.util.get_string("column3","atto_bsgrid")+'</p></div><div class="col-md-2 span2"><p>'+M.util.get_string("column4","atto_bsgrid")+'</p></div><div class="col-md-2 span2"><p>'+M.util.get_string("column5","atto_bsgrid")+'</p></div><div class="col-md-2 span2"><p>'+M.util.get_string("column6","atto_bsgrid")+"</p></div></div></div>",g={col2:{template:i,icon:"col2",title:M.util.get_string("col2","atto_bsgrid")},col3:{template:l,icon:"col3",title:M.util.get_string("col3","atto_bsgrid")},col1x3:{template:d,icon:"col1x3",title:M.util.get_string("col1x3","atto_bsgrid")},col3x1:{template:n,icon:"col3x1",title:M.util.get_string("col3x1","atto_bsgrid")},col4:{template:c,icon:"col4",title:M.util.get_string("col4","atto_bsgrid")},col6:{template:r,icon:"col6",title:M.util.get_string("col6","atto_bsgrid")}};function u(t,i){for(var l=0;l<t.length;l++)if(t[l]===i)return 1}o="",e.namespace("M.atto_bsgrid").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){var t,i;if(!this.get("disabled")){for(i in t=["iconone"],o+='<form class="atto_form"><div id="{{elementid}}_{{innerform}}" class="mdl-align">',g)u(this.get("enabled_templates"),i)&&(o+='<a class="bsgridtemplateicon {{CSS.INPUTSUBMIT}}" alt="'+g[i].title+'" title="'+g[i].title+'" data-template="'+i+'"><img src="'+M.util.image_url("ed/"+g[i].icon,"atto_bsgrid")+'"/></a>');o+="</div></form>",e.Array.each(t,function(t){this.addButton({icon:"ed/"+t,iconComponent:"atto_bsgrid",buttonName:t,callback:this._displayDialogue,callbackArgs:t})},this),this.editor.delegate("dblclick",this._handleDblClick,".atto_bsgrid",this)}},_displayDialogue:function(t,i){var l,o,s,d;t.preventDefault(),l=400,(o=this.getDialogue({headerContent:M.util.get_string("dialogtitle",a),width:l+"px",focusAfterHide:i})).width!==l+"px"&&o.set("width",l+"px"),s=this._getFormContent(i),(d=e.Node.create("<div></div>")).append(s),o.set("bodyContent",d),o.show(),this.markUpdated()},_getFormContent:function(t){var i=e.Handlebars.compile(o),l=e.Node.create(i({elementid:this.get("host").get("elementid"),CSS:s,component:a,clickedicon:t}));return this._form=l,this._form.all("."+s.INPUTSUBMIT).on("click",this._doInsert,this),l},_doInsert:function(t){t.preventDefault(),this.getDialogue({focusAfterHide:null}).hide(),this.editor.focus();var i=t.currentTarget.getAttribute("data-template");this.get("host").insertContentAtFocusPoint(g[i].template),this.markUpdated()},_handleDblClick:function(){var t,i=window.getSelection();if(i.anchorNode.nodeType!==Node.TEXT_NODE){if((t=i.anchorNode.children[i.anchorOffset].children[0].childNodes[0])===undefined||t.nodeType!==Node.TEXT_NODE)return;i.setBaseAndExtent(t,0,t,t.length)}}},{ATTRS:{enabled_templates:{values:["col2","col3","col1x3","col3x1","col4","col6"]}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});